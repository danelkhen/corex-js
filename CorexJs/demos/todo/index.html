<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>TODO Demo</title>
    <link href="index.css" rel="stylesheet" />
    <script src="../../js/corex.js"></script>
    <script src="../../lib/jquery/jquery-2.0.3.js"></script>
    <script src="../../res/databind.js"></script>
    <script src="index.js"></script>
    <script>$(main);</script>
</head>
<body>
    <h1>TODO Lists</h1>
    <div>
        <button onclick="save();">Save</button>
        <button onclick="load();">Load</button>
        <button onclick="newList();">New List</button>
        <button onclick="newTask();">New Task</button>
        <button onclick="deleteSelectedTask();">Delete Selected Task</button>
        <button onclick="deleteSelectedList();">Delete Selected List</button>
    </div>
    <div data-binders="[children()]">
        <div class="TodoList Template" onmousedown="selectList(this);" data-onbindback="scheduleSave();">
            <input class="Name" data-binders="[onchange('name')]" />
            <div class="DoneCount" data-onbind="DoneCount_onbind(event);"></div>
            <div class="Items" data-binders="[children('items')]">
                <div class="TodoItem Template" data-binders="[toggleclassoneway('done', 'Done')]" onmousedown="selectTask(this);">
                    <input type="checkbox" onchange="$(this).databindback().dataowner().databind().dataparent().children('.DoneCount').databind();" data-binders="[twoway('done')]" />
                    <input type="text" data-binders="[onchange('title'), oneway('done', 'disabled')]" />
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="index.css" rel="stylesheet" />
    <script src="../js/corex.js"></script>
    <script src="../lib/jquery/jquery-2.0.3.js"></script>
    <script src="../res/databind.js"></script>
    <script src="index.js"></script>
    <script>$(main);</script>
</head>
<body>
    <div>
        <button onclick="$(document).databind();">databind</button>
        <button onclick="$(document).databindback();">databindback</button>
        <button onclick="$(document).data('source').contacts.push({name:'New', isCool:false});$(document).databind();">New Item</button>
    </div>
    <textarea id="preJson" cols="80" rows="10" 
              data-onbind="this.value=JSON.stringify(source);" 
              onchange="$(document).data('source', JSON.parse(this.value));$(document).databind();"></textarea>
    <div class="Repeater" data-bindings="contacts:children;">
        <div class="Contact Template">
            <input                 data-bindings="name:value;"      onchange="$(this).databindback(); $(this).closest('div').find('pre').databind(); $('#preJson').databind();" />
            <input                 data-bindings="age:value;"       data-onbindback="source.age = parseInt(this.value);return false;"  onchange="$(this).databindback(); $(this).closest('div').find('pre').databind(); $('#preJson').databind();" />
            <input type="checkbox" data-bindings="isCool:checked;"  onchange="$(this).databindback(); $(this).closest('div').find('pre').databind(); $('#preJson').databind();"/>
            <pre data-onbind="this.textContent=JSON.stringify(source);"></pre>
        </div>
    </div>
</body>
</html>
